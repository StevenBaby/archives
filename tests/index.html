<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" rel="stylesheet">
    <link href="static/index.css" rel="stylesheet">
    <title>Home</title>
</head>

<body>
    <div class="wrapper">
        <div class="ui container">
            <div class="ui segments">
                <div class="ui segment" id="content">
                </div>
                <div class='ui segment'>
                    <button class='ui primary reset button'>重置</button>
                    <button class='ui green start button'>开始</button>
                    <button class='ui red stop button'>停止</button>
                    <button class='ui teal speed down button'>减速</button>
                    <button class='ui pink speed up button'>加速</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.4.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastr@2.1.4/toastr.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@0.8.0/lib/p5.min.js"></script>
    <script src="static/index.js"></script>
    <script src="../archives/计算机科学/数据结构/sort.js"></script>

    <script>
        $(document).ready(function () {
            sketch.algorithm = async function (array, start, end) {
                if (start >= end) return;

                console.log('start algorithm');
                sketch.activate = [start, end - 1];
                sketch.temp_value = array[start];

                let low = start;
                let high = end - 1;

                while (low < high) {
                    while (sketch.running && low < high && !await sketch.compare(array, high, array
                            .length)) {
                        high--;
                    }
                    if (!sketch.running) {
                        return;
                    }
                    await sketch.set(array, low, array[high]);
                    while (sketch.running && low < high && await sketch.compare(array, low, array
                            .length)) {
                        low++;
                    }
                    if (!sketch.running) {
                        return;
                    }
                    await sketch.set(array, high, array[low]);
                }
                await sketch.set(array, low, sketch.temp_value);
                if (!sketch.running) {
                    return;
                }
                await sketch.algorithm(array, start, low);
                if (!sketch.running) {
                    return;
                }
                await sketch.algorithm(array, low + 1, end);
                if (!sketch.running) {
                    return;
                }
                sketch.activate = [];
                sketch.temp_value = null;
            };
        });
    </script>
</body>

</html>