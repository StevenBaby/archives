# 冒泡排序

[annotation]: <id> (abf13747-d9c0-44c9-91b4-e0a207b15aa6)
[annotation]: <status> (public)
[annotation]: <create_time> (2019-04-22 16:20:56)
[annotation]: <category> (计算机科学)
[annotation]: <tags> (数据结构)

> 原文链接：<http://blog.ccyg.studio/article/abf13747-d9c0-44c9-91b4-e0a207b15aa6>

---


下面，做一些有趣的事情，下面的动画演示了冒泡排序的过程。

<div class="ui segments">
    <div class="ui segment" id="sketch-holder"></div>
    <div class='ui segment'>
        <button class='ui primary reset button'>重置</button>
    </div>
</div>
<link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.0/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/p5@0.8.0/lib/p5.min.js"></script>

<script>
var count = 16;
var array = new Array();
var left = null;
var right = null;

function sleep(ms){
  return new Promise((resolve)=>setTimeout(resolve,ms));
}

async function start(){
    var status = $('.status');
    left = null;
    right = null;
    var sleep_time = 200;
    for (let i = 0; i < array.length; i++) {
        for (let j = 1; j < array.length; j++) {
            left = j - 1;
            right = j;
            if( array[j] < array[j - 1])
            {
                let temp = array[j];
                array[j] = array[j - 1];
                array[j - 1] = temp;
                await sleep(sleep_time);
                console.log('take a exchange');
            }
            console.log(left + " " + right);
            await sleep(sleep_time);
        }
    }
    left = null;
    right = null;
}

function reset(){
    left = null;
    right = null;
    for (let index = 0; index < count; index++) {
        array[index] = parseInt(Math.random() * 100);
    }
    start();
}



function setup() {
    var width = $("#sketch-holder").width();
    canvas = createCanvas(width, width/1.77);
    canvas.parent('sketch-holder');
    reset();
}

function draw() {
    clear();
    var status = $('.status');
    // $('.status').html(parseInt(width) + " " + parseInt(height));

    var size = width / count;
    for (let index = 0; index < array.length; index++) {
        var w = size;
        var h = (array[index]) * height / 100;
        var x = index * size;
        var y = height - h;
        if (index == left){
            let c = color(255, 0, 0)
            fill(c);
        }
        else if(index == right){
            let c = color(0, 255, 0)
            fill(c);
        }
        else
        {
            fill(255);
        }
        rect(x, y, w, h);
    }
}

function windowResized() {
    var width = parseInt($("#sketch-holder").width());
    var height = parseInt(width / 1.77);
    resizeCanvas(width, height);
}

$('.reset.button').click(function(){
    reset();
    start();
});
</script>
